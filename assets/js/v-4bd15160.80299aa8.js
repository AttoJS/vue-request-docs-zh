"use strict";(self.webpackChunkzh=self.webpackChunkzh||[]).push([[114],{67054:(e,l,n)=>{n.r(l),n.d(l,{default:()=>ze});var t=n(27875);const r=(0,t.uE)('<h1 id="加载更多扩展-api" tabindex="-1"><a class="header-anchor" href="#加载更多扩展-api" aria-hidden="true">#</a> 加载更多扩展 API</h1><p>加载更多扩展。</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token operator">...</span>ReturnValues <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useLoadMore</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Service<span class="token punctuation">,</span> Options<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><div class="custom-container tip"><p class="custom-container-title">TS 类型说明</p><div class="language-typescript ext-ts"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">DataType</span> <span class="token operator">=</span> <span class="token punctuation">{</span> list<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>\n</code></pre></div></div>',4),a=(0,t._)("strong",null,"用法参考:",-1),o=(0,t.Uk)(),s=(0,t.Uk)("加载更多扩展"),i=(0,t.uE)('<h2 id="service" tabindex="-1"><a class="header-anchor" href="#service" aria-hidden="true">#</a> Service</h2><h3 id="请求函数" tabindex="-1"><a class="header-anchor" href="#请求函数" aria-hidden="true">#</a> 请求函数</h3><ul><li><p><strong>类型：</strong> <code>(data?: DataType) =&gt; Promise&lt;DataType&gt;</code></p></li><li><p><strong>详情：</strong></p><ul><li><code>Service</code> 返回的数据必须包含 <code>list</code> 数组，类型为 <code>{ list: any[], ...other }</code></li><li><code>Service</code> 的入参为整合后的最新的 <code>data</code></li></ul></li></ul><h2 id="return-values" tabindex="-1"><a class="header-anchor" href="#return-values" aria-hidden="true">#</a> Return Values</h2><h3 id="data" tabindex="-1"><a class="header-anchor" href="#data" aria-hidden="true">#</a> data</h3><ul><li><p><strong>类型：</strong> <code>shallowRef&lt;DataType&gt;</code></p></li><li><p><strong>默认值：</strong> <code>[]</code></p><p><code>Service</code> 返回的数据，必须包含 <code>list</code> 数组，类型为 <code>{ list: any[], ...other }</code>，其中的 <code>list</code> 属性为聚合后数据</p></li></ul><h3 id="datalist" tabindex="-1"><a class="header-anchor" href="#datalist" aria-hidden="true">#</a> dataList</h3><ul><li><p><strong>类型：</strong> <code>Ref&lt;DataType[&#39;list&#39;]&gt;</code></p></li><li><p><strong>默认值：</strong> <code>[]</code></p><p><code>data</code> 中的 <code>list</code> 数组</p></li></ul><h3 id="error" tabindex="-1"><a class="header-anchor" href="#error" aria-hidden="true">#</a> error</h3><ul><li><p><strong>类型：</strong> <code>shallowRef&lt;Error&gt;</code></p></li><li><p><strong>默认值：</strong> <code>[]</code></p><p><code>Service</code> 返回的错误</p></li></ul><h3 id="loading" tabindex="-1"><a class="header-anchor" href="#loading" aria-hidden="true">#</a> loading</h3><ul><li><p><strong>类型：</strong> <code>Ref&lt;boolean&gt;</code></p></li><li><p><strong>默认值：</strong> <code>false</code></p><p>是否正在进行请求</p></li></ul><h3 id="loadingmore" tabindex="-1"><a class="header-anchor" href="#loadingmore" aria-hidden="true">#</a> loadingMore</h3><ul><li><p><strong>类型：</strong> <code>Ref&lt;boolean&gt;</code></p></li><li><p><strong>默认值：</strong> <code>false</code></p><p>是否正在加载更多</p></li></ul><h3 id="nomore" tabindex="-1"><a class="header-anchor" href="#nomore" aria-hidden="true">#</a> noMore</h3><ul><li><p><strong>类型：</strong> <code>Ref&lt;boolean&gt;</code></p></li><li><p><strong>默认值：</strong> <code>false</code></p><p>是否有更多数据，需要配合 <a href="#isnomore"><code>isNoMore</code></a> 使用</p></li></ul><h3 id="loadmore" tabindex="-1"><a class="header-anchor" href="#loadmore" aria-hidden="true">#</a> loadMore</h3><ul><li><p><strong>类型：</strong> <code>() =&gt; void</code></p></li><li><p><strong>默认值：</strong> <code>0</code></p><p>触发加载更多</p></li></ul><h3 id="loadmoreasync" tabindex="-1"><a class="header-anchor" href="#loadmoreasync" aria-hidden="true">#</a> loadMoreAsync</h3><ul><li><p><strong>类型：</strong> <code>() =&gt; Promise&lt;DataType&gt;</code></p><p>与 <a href="#loadMore"><code>loadMore</code></a> 用法一致，但返回的是 <code>Promise</code>，需要自行处理异常。</p></li></ul><h3 id="refresh" tabindex="-1"><a class="header-anchor" href="#refresh" aria-hidden="true">#</a> refresh</h3><ul><li><p><strong>类型：</strong> <code>() =&gt; void</code></p><p>重新加载第一页数据，会自动捕获异常，通过 <code>options.onError</code> 处理</p></li></ul><h3 id="refreshasync" tabindex="-1"><a class="header-anchor" href="#refreshasync" aria-hidden="true">#</a> refreshAsync</h3><ul><li><p><strong>类型：</strong> <code>() =&gt; Promise&lt;DataType&gt;</code></p><p>与 <a href="#refresh"><code>refresh</code></a> 用法一致，但返回的是 <code>Promise</code>，需要自行处理异常。</p></li></ul><h3 id="mutate" tabindex="-1"><a class="header-anchor" href="#mutate" aria-hidden="true">#</a> mutate</h3><ul><li><p><strong>类型：</strong> <code>(arg: (oldData: DataType) =&gt; DataType) =&gt; void | (newData: DataType) =&gt; void</code></p><p>直接修改 <code>data</code> 的结果</p></li></ul><h3 id="cancel" tabindex="-1"><a class="header-anchor" href="#cancel" aria-hidden="true">#</a> cancel</h3><ul><li><p><strong>类型：</strong> <code>() =&gt; void</code></p><p>取消请求</p></li></ul><h2 id="options" tabindex="-1"><a class="header-anchor" href="#options" aria-hidden="true">#</a> Options</h2><h3 id="isnomore" tabindex="-1"><a class="header-anchor" href="#isnomore" aria-hidden="true">#</a> isNoMore</h3><ul><li><p><strong>类型：</strong> <code>(data?: DataType) =&gt; boolean</code></p></li><li><p><strong>详情：</strong></p><p>判断是否还有更多数据。</p></li></ul><h3 id="manual" tabindex="-1"><a class="header-anchor" href="#manual" aria-hidden="true">#</a> manual</h3><ul><li><p><strong>类型：</strong> <code>boolean</code></p></li><li><p><strong>默认值：</strong> <code>false</code></p></li><li><p><strong>详情：</strong></p><p>当设置为 <code>true</code> 时，你需要手动触发 <code>loadMore</code> 或者 <code>loadMoreAsync</code> 才会发起请求。</p></li></ul>',33),d={id:"ready",tabindex:"-1"},c=(0,t._)("a",{class:"header-anchor",href:"#ready","aria-hidden":"true"},"#",-1),u=(0,t.Uk)(" ready "),p=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"类型："),(0,t.Uk)(),(0,t._)("code",null,"Ref<boolean>")])],-1),h=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"默认值："),(0,t.Uk)(),(0,t._)("code",null,"false")])],-1),g=(0,t._)("p",null,[(0,t._)("strong",null,"详情：")],-1),_=(0,t.Uk)("同 "),f=(0,t._)("code",null,"useRequest",-1),v=(0,t.Uk)(" 的 "),k=(0,t.Uk)("ready"),b=(0,t._)("h3",{id:"refreshdeps",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#refreshdeps","aria-hidden":"true"},"#"),(0,t.Uk)(" refreshDeps")],-1),m=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"类型："),(0,t.Uk)(),(0,t._)("code",null,"WatchSource<any>[]")])],-1),y=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"默认值："),(0,t.Uk)(),(0,t._)("code",null,"[]")])],-1),U=(0,t._)("p",null,[(0,t._)("strong",null,"详情：")],-1),x=(0,t.Uk)("同 "),R=(0,t._)("code",null,"useRequest",-1),D=(0,t.Uk)(" 的 "),M=(0,t.Uk)("refreshDeps"),w=(0,t._)("h3",{id:"refreshdepsaction",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#refreshdepsaction","aria-hidden":"true"},"#"),(0,t.Uk)(" refreshDepsAction")],-1),W=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"类型："),(0,t.Uk)(),(0,t._)("code",null,"() => void")])],-1),T=(0,t._)("p",null,[(0,t._)("strong",null,"详情：")],-1),S=(0,t.Uk)("同 "),O=(0,t._)("code",null,"useRequest",-1),A=(0,t.Uk)(" 的 "),q=(0,t.Uk)("refreshDepsAction"),I={id:"debounceinterval",tabindex:"-1"},E=(0,t._)("a",{class:"header-anchor",href:"#debounceinterval","aria-hidden":"true"},"#",-1),P=(0,t.Uk)(" debounceInterval "),C=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"类型："),(0,t.Uk)(),(0,t._)("code",null,"number | Ref<number>")])],-1),L=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"默认值："),(0,t.Uk)(),(0,t._)("code",null,"undefined")])],-1),N=(0,t._)("p",null,[(0,t._)("strong",null,"详情：")],-1),z=(0,t.Uk)("同 "),B=(0,t._)("code",null,"useRequest",-1),V=(0,t.Uk)(" 的 "),J=(0,t.Uk)("debounceInterval"),j={id:"debounceoptions",tabindex:"-1"},H=(0,t._)("a",{class:"header-anchor",href:"#debounceoptions","aria-hidden":"true"},"#",-1),Y=(0,t.Uk)(" debounceOptions "),Z=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"类型："),(0,t.Uk)(),(0,t._)("code",null,"DebounceOptions | Reactive<DebounceOptions>")])],-1),F=(0,t._)("p",null,[(0,t._)("strong",null,"详情：")],-1),G=(0,t.Uk)("同 "),K=(0,t._)("code",null,"useRequest",-1),Q=(0,t.Uk)(" 的 "),X=(0,t.Uk)("debounceOptions"),$={id:"throttleinterval",tabindex:"-1"},ee=(0,t._)("a",{class:"header-anchor",href:"#throttleinterval","aria-hidden":"true"},"#",-1),le=(0,t.Uk)(" throttleInterval "),ne=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"类型："),(0,t.Uk)(),(0,t._)("code",null,"number | Ref<number>")])],-1),te=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"默认值："),(0,t.Uk)(),(0,t._)("code",null,"undefined")])],-1),re=(0,t._)("p",null,[(0,t._)("strong",null,"详情：")],-1),ae=(0,t.Uk)("同 "),oe=(0,t._)("code",null,"useRequest",-1),se=(0,t.Uk)(" 的 "),ie=(0,t.Uk)("throttleInterval"),de={id:"throttleoptions",tabindex:"-1"},ce=(0,t._)("a",{class:"header-anchor",href:"#throttleoptions","aria-hidden":"true"},"#",-1),ue=(0,t.Uk)(" throttleOptions "),pe=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"类型："),(0,t.Uk)(),(0,t._)("code",null,"ThrottleOptions | Reactive<ThrottleOptions>")])],-1),he=(0,t._)("p",null,[(0,t._)("strong",null,"详情：")],-1),ge=(0,t.Uk)("同 "),_e=(0,t._)("code",null,"useRequest",-1),fe=(0,t.Uk)(" 的 "),ve=(0,t.Uk)("throttleOptions"),ke={id:"errorretrycount",tabindex:"-1"},be=(0,t._)("a",{class:"header-anchor",href:"#errorretrycount","aria-hidden":"true"},"#",-1),me=(0,t.Uk)(" errorRetryCount "),ye=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"类型："),(0,t.Uk)(),(0,t._)("code",null,"number | Ref<number>")])],-1),Ue=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"默认值："),(0,t.Uk)(),(0,t._)("code",null,"0")])],-1),xe=(0,t._)("p",null,[(0,t._)("strong",null,"详情：")],-1),Re=(0,t.Uk)("同 "),De=(0,t._)("code",null,"useRequest",-1),Me=(0,t.Uk)(" 的 "),we=(0,t.Uk)("errorRetryCount"),We={id:"errorretryinterval",tabindex:"-1"},Te=(0,t._)("a",{class:"header-anchor",href:"#errorretryinterval","aria-hidden":"true"},"#",-1),Se=(0,t.Uk)(" errorRetryInterval "),Oe=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"类型："),(0,t.Uk)(),(0,t._)("code",null,"number | Ref<number>")])],-1),Ae=(0,t._)("li",null,[(0,t._)("p",null,[(0,t._)("strong",null,"默认值："),(0,t.Uk)(),(0,t._)("code",null,"0")])],-1),qe=(0,t._)("p",null,[(0,t._)("strong",null,"详情：")],-1),Ie=(0,t.Uk)("同 "),Ee=(0,t._)("code",null,"useRequest",-1),Pe=(0,t.Uk)(" 的 "),Ce=(0,t.Uk)("errorRetryInterval"),Le=(0,t.uE)('<h3 id="onbefore" tabindex="-1"><a class="header-anchor" href="#onbefore" aria-hidden="true">#</a> onBefore</h3><ul><li><p><strong>类型：</strong> <code>() =&gt; void</code></p></li><li><p><strong>详情：</strong></p><p><code>Service</code> 执行前触发。</p></li></ul><h3 id="onafter" tabindex="-1"><a class="header-anchor" href="#onafter" aria-hidden="true">#</a> onAfter</h3><ul><li><p><strong>类型：</strong> <code>() =&gt; void</code></p></li><li><p><strong>详情：</strong></p><p><code>Service</code> 执行完成时触发。</p></li></ul><h3 id="onsuccess" tabindex="-1"><a class="header-anchor" href="#onsuccess" aria-hidden="true">#</a> onSuccess</h3><ul><li><p><strong>类型：</strong> <code>(data: DataType) =&gt; void</code></p></li><li><p><strong>详情：</strong></p><p>当 <code>Service</code> <code>resolve</code> 时触发，参数为 <a href="#data"><code>data</code></a>。</p></li></ul><h3 id="onerror" tabindex="-1"><a class="header-anchor" href="#onerror" aria-hidden="true">#</a> onError</h3><ul><li><p><strong>类型：</strong> <code>(error: Error) =&gt; void</code></p></li><li><p><strong>详情：</strong></p><p>当 <code>Service</code> <code>reject</code> 时触发，参数为 <a href="#error"><code>error</code></a>。</p></li></ul>',8),Ne={},ze=(0,n(94407).Z)(Ne,[["render",function(e,l){const n=(0,t.up)("RouterLink"),Ne=(0,t.up)("Badge");return(0,t.wg)(),(0,t.iD)(t.HY,null,[r,(0,t._)("p",null,[a,o,(0,t.Wm)(n,{to:"/guide/documentation/loadMore.html"},{default:(0,t.w5)((()=>[s])),_:1})]),i,(0,t._)("h3",d,[c,u,(0,t.Wm)(Ne,{type:"tip",text:"响应式",vertical:"top"})]),(0,t._)("ul",null,[p,h,(0,t._)("li",null,[g,(0,t._)("p",null,[_,f,v,(0,t.Wm)(n,{to:"/api/#ready"},{default:(0,t.w5)((()=>[k])),_:1})])])]),b,(0,t._)("ul",null,[m,y,(0,t._)("li",null,[U,(0,t._)("p",null,[x,R,D,(0,t.Wm)(n,{to:"/api/#refreshdeps"},{default:(0,t.w5)((()=>[M])),_:1})])])]),w,(0,t._)("ul",null,[W,(0,t._)("li",null,[T,(0,t._)("p",null,[S,O,A,(0,t.Wm)(n,{to:"/api/#refreshdepsaction"},{default:(0,t.w5)((()=>[q])),_:1})])])]),(0,t._)("h3",I,[E,P,(0,t.Wm)(Ne,{type:"tip",text:"响应式",vertical:"top"})]),(0,t._)("ul",null,[C,L,(0,t._)("li",null,[N,(0,t._)("p",null,[z,B,V,(0,t.Wm)(n,{to:"/api/#debounceinterval"},{default:(0,t.w5)((()=>[J])),_:1})])])]),(0,t._)("h3",j,[H,Y,(0,t.Wm)(Ne,{type:"tip",text:"响应式",vertical:"top"})]),(0,t._)("ul",null,[Z,(0,t._)("li",null,[F,(0,t._)("p",null,[G,K,Q,(0,t.Wm)(n,{to:"/api/#debounceoptions"},{default:(0,t.w5)((()=>[X])),_:1})])])]),(0,t._)("h3",$,[ee,le,(0,t.Wm)(Ne,{type:"tip",text:"响应式",vertical:"top"})]),(0,t._)("ul",null,[ne,te,(0,t._)("li",null,[re,(0,t._)("p",null,[ae,oe,se,(0,t.Wm)(n,{to:"/api/#throttleinterval"},{default:(0,t.w5)((()=>[ie])),_:1})])])]),(0,t._)("h3",de,[ce,ue,(0,t.Wm)(Ne,{type:"tip",text:"响应式",vertical:"top"})]),(0,t._)("ul",null,[pe,(0,t._)("li",null,[he,(0,t._)("p",null,[ge,_e,fe,(0,t.Wm)(n,{to:"/api/#throttleoptions"},{default:(0,t.w5)((()=>[ve])),_:1})])])]),(0,t._)("h3",ke,[be,me,(0,t.Wm)(Ne,{type:"tip",text:"响应式",vertical:"top"})]),(0,t._)("ul",null,[ye,Ue,(0,t._)("li",null,[xe,(0,t._)("p",null,[Re,De,Me,(0,t.Wm)(n,{to:"/api/#errorretrycount"},{default:(0,t.w5)((()=>[we])),_:1})])])]),(0,t._)("h3",We,[Te,Se,(0,t.Wm)(Ne,{type:"tip",text:"响应式",vertical:"top"})]),(0,t._)("ul",null,[Oe,Ae,(0,t._)("li",null,[qe,(0,t._)("p",null,[Ie,Ee,Pe,(0,t.Wm)(n,{to:"/api/#errorretryinterval"},{default:(0,t.w5)((()=>[Ce])),_:1})])])]),Le],64)}]])},64488:(e,l,n)=>{n.r(l),n.d(l,{data:()=>t});const t={key:"v-4bd15160",path:"/api/loadMore.html",title:"加载更多扩展 API",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"Service",slug:"service",children:[{level:3,title:"请求函数",slug:"请求函数",children:[]}]},{level:2,title:"Return Values",slug:"return-values",children:[{level:3,title:"data",slug:"data",children:[]},{level:3,title:"dataList",slug:"datalist",children:[]},{level:3,title:"error",slug:"error",children:[]},{level:3,title:"loading",slug:"loading",children:[]},{level:3,title:"loadingMore",slug:"loadingmore",children:[]},{level:3,title:"noMore",slug:"nomore",children:[]},{level:3,title:"loadMore",slug:"loadmore",children:[]},{level:3,title:"loadMoreAsync",slug:"loadmoreasync",children:[]},{level:3,title:"refresh",slug:"refresh",children:[]},{level:3,title:"refreshAsync",slug:"refreshasync",children:[]},{level:3,title:"mutate",slug:"mutate",children:[]},{level:3,title:"cancel",slug:"cancel",children:[]}]},{level:2,title:"Options",slug:"options",children:[{level:3,title:"isNoMore",slug:"isnomore",children:[]},{level:3,title:"manual",slug:"manual",children:[]},{level:3,title:"ready",slug:"ready",children:[]},{level:3,title:"refreshDeps",slug:"refreshdeps",children:[]},{level:3,title:"refreshDepsAction",slug:"refreshdepsaction",children:[]},{level:3,title:"debounceInterval",slug:"debounceinterval",children:[]},{level:3,title:"debounceOptions",slug:"debounceoptions",children:[]},{level:3,title:"throttleInterval",slug:"throttleinterval",children:[]},{level:3,title:"throttleOptions",slug:"throttleoptions",children:[]},{level:3,title:"errorRetryCount",slug:"errorretrycount",children:[]},{level:3,title:"errorRetryInterval",slug:"errorretryinterval",children:[]},{level:3,title:"onBefore",slug:"onbefore",children:[]},{level:3,title:"onAfter",slug:"onafter",children:[]},{level:3,title:"onSuccess",slug:"onsuccess",children:[]},{level:3,title:"onError",slug:"onerror",children:[]}]}],filePathRelative:"api/loadMore.md",git:{updatedTime:1686031868e3,contributors:[{name:"John",email:"John60676@qq.com",commits:1}]}}}}]);