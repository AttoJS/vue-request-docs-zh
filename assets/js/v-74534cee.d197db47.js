(self.webpackChunkzh=self.webpackChunkzh||[]).push([[841],{4501:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>E});var t=a(7875);const p=(0,t.Wm)("h1",{id:"节流"},[(0,t.Wm)("a",{class:"header-anchor",href:"#节流"},"#"),(0,t.Uk)(" 节流")],-1),o=(0,t.Uk)("有关节流的解释，你可以在"),e={href:"https://css-tricks.com/debouncing-throttling-explained-examples/#throttle",target:"_blank",rel:"noopener noreferrer"},c=(0,t.Uk)("这里"),u=(0,t.Uk)(" 找到。"),l=(0,t.Uk)("简单来说就是，保证每 X 毫秒去执行一次函数。例如输入事件，"),k=(0,t.Wm)("code",null,"throttle",-1),i=(0,t.Uk)(" 函数会在用户"),r=(0,t.Wm)("strong",null,"输入的过程中",-1),m=(0,t.Uk)("以设定的时间间隔去执行函数。这与我们上一节提到的 "),d=(0,t.Wm)("code",null,"debounce",-1),g=(0,t.Uk)(" 有很大的区别。"),b={class:"custom-container warning"},h=(0,t.Wm)("p",{class:"custom-container-title"},"注意",-1),f=(0,t.Uk)("VueRequest 的节流是使用 "),W={href:"https://lodash.com",target:"_blank",rel:"noopener noreferrer"},v=(0,t.Wm)("strong",null,"lodash",-1),w=(0,t.Uk)(" 提供的 "),y={href:"https://lodash.com/docs/4.17.15#throttle",target:"_blank",rel:"noopener noreferrer"},x=(0,t.Wm)("code",null,"throttle",-1),U=(0,t.Uk)(" 实现的，"),q=(0,t.Wm)("code",null,"leading",-1),_=(0,t.Uk)(" 和 "),C=(0,t.Wm)("code",null,"trailing",-1),R=(0,t.Uk)(" 选项默认为 true，因此，"),j=(0,t.Wm)("strong",null,"在第一个 throttle 的执行间隔中可能会触发两次请求",-1),z=(0,t.Uk)("如下所示，你只需要提供一个 "),I=(0,t.Wm)("code",null,"throttleInterval",-1),T=(0,t.Uk)(" 来告诉我们节流的执行间隔。这样用户在输入信息时，每隔 300 毫秒 我们就会发起一次请求。"),D=(0,t.uE)('<div class="language-tsx ext-tsx"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> useRequest <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-request&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> Mock <span class="token keyword">from</span> <span class="token string">&#39;mockjs&#39;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">testService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> array<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token function">resolve</span><span class="token punctuation">(</span>\n        Mock<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n          <span class="token string">&#39;array|3-5&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@name&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  name<span class="token operator">:</span> <span class="token string">&#39;App&#39;</span><span class="token punctuation">,</span>\n  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> run <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span>testService<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n      throttleInterval<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>\n      manual<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Enter the name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onInput</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\n          </span><span class="token punctuation">{</span>loading<span class="token punctuation">.</span>value\n            <span class="token operator">?</span> <span class="token string">&#39;loading...&#39;</span>\n            <span class="token operator">:</span> data<span class="token punctuation">.</span>value<span class="token operator">?.</span>array<span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">\n        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">\n      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div></div>',1),E={render:function(n,s){const a=(0,t.up)("OutboundLink"),E=(0,t.up)("RouterLink"),L=(0,t.up)("ThrottleDemo"),M=(0,t.up)("Demo");return(0,t.wg)(),(0,t.j4)(t.HY,null,[p,(0,t.Wm)("blockquote",null,[(0,t.Wm)("p",null,[o,(0,t.Wm)("a",e,[c,(0,t.Wm)(a)]),u])]),(0,t.Wm)("p",null,[l,(0,t.Wm)(E,{to:"/api/#throttle"},{default:(0,t.w5)((()=>[k])),_:1}),i,r,m,(0,t.Wm)(E,{to:"/guide/documentation/debounce.html"},{default:(0,t.w5)((()=>[d])),_:1}),g]),(0,t.Wm)("div",b,[h,(0,t.Wm)("p",null,[f,(0,t.Wm)("a",W,[v,(0,t.Wm)(a)]),w,(0,t.Wm)("a",y,[x,(0,t.Wm)(a)]),U,q,_,C,R,j])]),(0,t.Wm)("p",null,[z,(0,t.Wm)(E,{to:"/api/#throttleinterval"},{default:(0,t.w5)((()=>[I])),_:1}),T]),(0,t.Wm)(M,null,{default:(0,t.w5)((()=>[(0,t.Wm)(L)])),_:1}),D],64)}}},8257:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>t});const t={key:"v-74534cee",path:"/guide/documentation/throttle.html",title:"节流",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[],filePathRelative:"guide/documentation/throttle.md",git:{updatedTime:1621417083e3,contributors:[]}}}}]);